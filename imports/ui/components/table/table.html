<template name="table">
  <table>
    <thead>
      <tr>
        {{#each header in headers}}
          <th>{{header.label}}</th>
        {{/each}}
      </tr>
    </thead>

    <tbody>
      {{#each row in rows}}
        <tr>
          {{#each header in headers}}
            {{#if isObject (pick row header.key)}}
              <td>
                {{#each item in (list (pick row header.key))}}
                  <div>{{item.key}} : {{item.value}}</div>
                {{/each}}
              </td>
            {{else}}
              <td>{{pick row header.key}}</td>
            {{/if}}
          {{/each}}

          {{#if deletable}}
            <td>x</td>
          {{/if}}
        </tr>
      {{/each}}
    </tbody>
  </table>
</template>
